<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon.ico">
  <link rel="mask-icon" href="/assets/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"haies.cn","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="åœ¨UOS V20 1070ï¼ˆå†…æ ¸4.19ï¼‰ä¸Šä¸ºWindows 10è™šæ‹Ÿæœºé…ç½®åŸºäºVirtioFSçš„æ–‡ä»¶å…±äº«ï¼Œç¡®å®éœ€è¦ä¸€äº›ç»†è‡´çš„æ“ä½œã€‚ä¸‹é¢è¿™ä»½æ•™ç¨‹å°†å¼•å¯¼ä½ å®Œæˆä¸»è¦ç»„ä»¶çš„ç¼–è¯‘å®‰è£…å’Œé…ç½®ã€‚ ğŸ¯ UOSä¸‹çš„KVMç¼–è¯‘å®‰è£…æœ¬æ•™ç¨‹å®ç°åœ¨ UOS V20 1070 (å†…æ ¸4.19) ç³»ç»Ÿä¸Šï¼Œé€šè¿‡ç¼–è¯‘å®‰è£… QEMU 7.2.21ã€libvirt 8.0.0 å’Œ virt-manager 5.1.0ï¼Œå®ç°ä¸»æœº (">
<meta property="og:type" content="article">
<meta property="og:title" content="kvm">
<meta property="og:url" content="http://haies.cn/kvm/index.html">
<meta property="og:site_name" content="ä¸€æœ¬ç ç°¿">
<meta property="og:description" content="åœ¨UOS V20 1070ï¼ˆå†…æ ¸4.19ï¼‰ä¸Šä¸ºWindows 10è™šæ‹Ÿæœºé…ç½®åŸºäºVirtioFSçš„æ–‡ä»¶å…±äº«ï¼Œç¡®å®éœ€è¦ä¸€äº›ç»†è‡´çš„æ“ä½œã€‚ä¸‹é¢è¿™ä»½æ•™ç¨‹å°†å¼•å¯¼ä½ å®Œæˆä¸»è¦ç»„ä»¶çš„ç¼–è¯‘å®‰è£…å’Œé…ç½®ã€‚ ğŸ¯ UOSä¸‹çš„KVMç¼–è¯‘å®‰è£…æœ¬æ•™ç¨‹å®ç°åœ¨ UOS V20 1070 (å†…æ ¸4.19) ç³»ç»Ÿä¸Šï¼Œé€šè¿‡ç¼–è¯‘å®‰è£… QEMU 7.2.21ã€libvirt 8.0.0 å’Œ virt-manager 5.1.0ï¼Œå®ç°ä¸»æœº (">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-11-25T00:28:20.000Z">
<meta property="article:modified_time" content="2025-11-25T01:30:13.729Z">
<meta property="article:author" content="ä¸‡æœ¯æµ·">
<meta property="article:tag" content="os">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://haies.cn/kvm/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>kvm | ä¸€æœ¬ç ç°¿</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">ä¸€æœ¬ç ç°¿</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">ä¼—é‡Œå¯»ç åƒç™¾åº¦ï¼Œé‚£æ®µå´åœ¨githubå¤„ã€‚</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://haies.cn/kvm/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/avatar.jpg">
      <meta itemprop="name" content="ä¸‡æœ¯æµ·">
      <meta itemprop="description" content="ä¸ªäººçŸ¥è¯†åº“è®°è½½">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä¸€æœ¬ç ç°¿">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          kvm
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2025-11-25 08:28:20 / ä¿®æ”¹æ—¶é—´ï¼š09:30:13" itemprop="dateCreated datePublished" datetime="2025-11-25T08:28:20+08:00">2025-11-25</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>åœ¨UOS V20 1070ï¼ˆå†…æ ¸4.19ï¼‰ä¸Šä¸ºWindows 10è™šæ‹Ÿæœºé…ç½®åŸºäºVirtioFSçš„æ–‡ä»¶å…±äº«ï¼Œç¡®å®éœ€è¦ä¸€äº›ç»†è‡´çš„æ“ä½œã€‚ä¸‹é¢è¿™ä»½æ•™ç¨‹å°†å¼•å¯¼ä½ å®Œæˆä¸»è¦ç»„ä»¶çš„ç¼–è¯‘å®‰è£…å’Œé…ç½®ã€‚</p>
<h2 id="ğŸ¯-UOSä¸‹çš„KVMç¼–è¯‘å®‰è£…"><a href="#ğŸ¯-UOSä¸‹çš„KVMç¼–è¯‘å®‰è£…" class="headerlink" title="ğŸ¯ UOSä¸‹çš„KVMç¼–è¯‘å®‰è£…"></a>ğŸ¯ UOSä¸‹çš„KVMç¼–è¯‘å®‰è£…</h2><p>æœ¬æ•™ç¨‹å®ç°åœ¨ <strong>UOS V20 1070 (å†…æ ¸4.19)</strong> ç³»ç»Ÿä¸Šï¼Œé€šè¿‡ç¼–è¯‘å®‰è£… <strong>QEMU 7.2.21</strong>ã€<strong>libvirt 8.0.0</strong> å’Œ <strong>virt-manager 5.1.0</strong>ï¼Œå®ç°ä¸»æœº (Host) UOS ä¸å®¢æˆ·æœº (Guest) Windows 10 ä¹‹é—´åŸºäº <strong>VirtioFS</strong> é©±åŠ¨çš„é«˜æ•ˆæ–‡ä»¶å…±äº«ã€‚</p>
<p>é€‰æ‹©æ­¤ç‰ˆæœ¬ç»„åˆä¸»è¦æ˜¯å› ä¸ºï¼š</p>
<ul>
<li><strong>QEMU 7.2.21</strong> æ˜¯æœ€åä¸€ä¸ªå®Œæ•´æ”¯æŒ <strong>Cè¯­è¨€ç‰ˆæœ¬ virtiofsd</strong> çš„QEMUç¨³å®šç‰ˆã€‚</li>
<li><strong>libvirt 8.0.0</strong> æ˜¯é»˜è®¤ä¼šå»å¯»æ‰¾å¹¶ä½¿ç”¨ <strong>Cç‰ˆæœ¬ virtiofsd</strong> çš„æœ€é«˜ç‰ˆæœ¬ã€‚</li>
</ul>
<p>ç³»ç»Ÿè‡ªå¸¦ç‰ˆæœ¬çš„kvmç‰ˆæœ¬è€æ—§ï¼Œä¸”æ— æ³•å®ç°åŸºäº <strong>VirtioFS</strong> é©±åŠ¨çš„é«˜æ•ˆæ–‡ä»¶å…±äº«ï¼Œç¼–è¯‘å®‰è£…èƒ½ç¡®ä¿ç»„ä»¶é—´æ›´å¥½çš„å…¼å®¹æ€§ã€‚æ•™ç¨‹ä¼šæ¶‰åŠå‡çº§ <strong>Python3</strong>ã€<strong>pyenv</strong> å’Œ <strong>Meson</strong> ä»¥æ»¡è¶³ç¼–è¯‘è¦æ±‚ï¼Œå¹¶ç»Ÿä¸€ä½¿ç”¨ <strong>é˜¿é‡Œäº‘é•œåƒ</strong> åŠ é€Ÿä¸‹è½½ï¼Œå®‰è£…è·¯å¾„ç»Ÿä¸€ä¸º <code>/usr/local</code>ã€‚</p>
<h2 id="ğŸ“¦-å‰æœŸå‡†å¤‡ï¼šç¯å¢ƒä¸ä¾èµ–"><a href="#ğŸ“¦-å‰æœŸå‡†å¤‡ï¼šç¯å¢ƒä¸ä¾èµ–" class="headerlink" title="ğŸ“¦ å‰æœŸå‡†å¤‡ï¼šç¯å¢ƒä¸ä¾èµ–"></a>ğŸ“¦ å‰æœŸå‡†å¤‡ï¼šç¯å¢ƒä¸ä¾èµ–</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥é…ç½®ç¼–è¯‘ç¯å¢ƒå’Œå®‰è£…åŸºç¡€ä¾èµ–ã€‚</p>
<ol>
<li><p><strong>æ›´æ–°ç³»ç»Ÿå¹¶å®‰è£…åŸºç¡€å·¥å…·</strong><br> ç¡®ä¿ç³»ç»Ÿä¸ºæœ€æ–°å¹¶å®‰è£…å¿…è¦çš„å¼€å‘å·¥å…·ï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt upgrade -y</span><br><span class="line">sudo apt install -y wget curl git build-essential pkg-config</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>é…ç½®Pythonç¯å¢ƒ (ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒ)</strong><br> é‰´äºUOSè‡ªå¸¦Pythonç‰ˆæœ¬å¯èƒ½è¾ƒä½ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>pyenv</code> å®‰è£…æ–°ç‰ˆPythonã€‚</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…pyenv</span></span><br><span class="line">git <span class="built_in">clone</span> https://gitee.com/mirrors/pyenv.git ~/.pyenv</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export PYENV_ROOT="$HOME/.pyenv"'</span> &gt;&gt; ~/.zshrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export PATH="$PYENV_ROOT/bin:$PATH"'</span> &gt;&gt; ~/.zshrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'eval "$(pyenv init -)"'</span> &gt;&gt; ~/.zshrc</span><br><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®pyenvä½¿ç”¨å›½å†…é•œåƒåŠ é€ŸPythonå®‰è£…</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export PYTHON_BUILD_MIRROR_URL="https://mirrors.aliyun.com/python/"'</span> &gt;&gt; ~/.zshrc</span><br><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡pyenvå®‰è£…Python 3.8.12 (æ­¤ç‰ˆæœ¬ä¸QEMU 7.2.21å…¼å®¹æ€§å¥½)</span></span><br><span class="line">pyenv install 3.8.12</span><br><span class="line">pyenv global 3.8.12</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å‡çº§pipå’Œå®‰è£…Meson (ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒ)</strong></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip config <span class="built_in">set</span> global.index-url https://mirrors.aliyun.com/pypi/simple/</span><br><span class="line">pip install --upgrade pip</span><br><span class="line">pip install meson ninja</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="ğŸ”§-ç»„ä»¶ç¼–è¯‘ä¸å®‰è£…"><a href="#ğŸ”§-ç»„ä»¶ç¼–è¯‘ä¸å®‰è£…" class="headerlink" title="ğŸ”§ ç»„ä»¶ç¼–è¯‘ä¸å®‰è£…"></a>ğŸ”§ ç»„ä»¶ç¼–è¯‘ä¸å®‰è£…</h2><p>ç°åœ¨ï¼Œå¼€å§‹ç¼–è¯‘å’Œå®‰è£…ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ã€‚</p>
<h3 id="1-ç¼–è¯‘å®‰è£…-QEMU-7-2-21"><a href="#1-ç¼–è¯‘å®‰è£…-QEMU-7-2-21" class="headerlink" title="1. ç¼–è¯‘å®‰è£… QEMU 7.2.21"></a>1. ç¼–è¯‘å®‰è£… QEMU 7.2.21</h3><p>QEMUæ˜¯å®é™…çš„è™šæ‹Ÿæœºç›‘æ§å™¨ï¼Œ<code>virtiofsd</code> ä¹Ÿéšå…¶å‘å¸ƒã€‚</p>
<ul>
<li><p><strong>å®‰è£…QEMUä¸“å±ä¾èµ–</strong></p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install -y libglib2.0-dev libpixman-1-dev libcap-ng-dev libseccomp-dev \</span><br><span class="line">libfuse3-dev libattr1-dev libselinux1-dev</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ç¼–è¯‘ä¸å®‰è£…</strong></p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">wget https://download.qemu.org/qemu-7.2.21.tar.xz</span><br><span class="line">tar xvf qemu-7.2.21.tar.xz</span><br><span class="line"><span class="built_in">cd</span> qemu-7.2.21</span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span> --target-list=x86_64-softmmu \</span><br><span class="line">--<span class="built_in">enable</span>-kvm --<span class="built_in">enable</span>-spice --<span class="built_in">enable</span>-vnc --<span class="built_in">enable</span>-guest-agent \</span><br><span class="line">--<span class="built_in">enable</span>-virtfs --<span class="built_in">enable</span>-virtiofsd --<span class="built_in">enable</span>-libusb --<span class="built_in">enable</span>-usb-redir \</span><br><span class="line">--<span class="built_in">enable</span>-sdl --<span class="built_in">enable</span>-seccomp --<span class="built_in">enable</span>-numa --<span class="built_in">enable</span>-virglrenderer --<span class="built_in">enable</span>-opengl</span><br><span class="line">make -j$(nproc)</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>éªŒè¯å®‰è£…</strong></p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">qemu-system-x86_64 --version</span><br><span class="line">/usr/<span class="built_in">local</span>/libexec/virtiofsd --version</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="2-ç¼–è¯‘å®‰è£…-libvirt-8-0-0"><a href="#2-ç¼–è¯‘å®‰è£…-libvirt-8-0-0" class="headerlink" title="2. ç¼–è¯‘å®‰è£… libvirt 8.0.0"></a>2. ç¼–è¯‘å®‰è£… libvirt 8.0.0</h3><p>libvirtæä¾›äº†ç®¡ç†è™šæ‹Ÿæœºçš„APIå’Œå·¥å…·é“¾ã€‚</p>
<ul>
<li><p><strong>å®‰è£…libvirtä¸“å±ä¾èµ–</strong></p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install -y libxml2-dev libgnutls28-dev libyajl-dev libnl-3-dev \</span><br><span class="line">libnl-route-3-dev libpciaccess-dev libdevmapper-dev libudev-dev libcurl4-gnutls-dev</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ç¼–è¯‘ä¸å®‰è£… (ä½¿ç”¨Meson)</strong></p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">git <span class="built_in">clone</span> https://gitlab.com/libvirt/libvirt.git</span><br><span class="line"><span class="built_in">cd</span> libvirt</span><br><span class="line">git checkout v8.0.0</span><br><span class="line">meson setup build --prefix=/usr/<span class="built_in">local</span> -Dsystem=<span class="literal">true</span> -Ddriver_qemu=enabled -Ddriver_libvirtd=enabled -Ddriver_remote=enabled -Ddocs=disabled</span><br><span class="line"></span><br><span class="line">ninja -C build</span><br><span class="line">sudo ninja -C build install</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export LIBVIRT_DEFAULT_URI=qemu:///system'</span> &gt;&gt; ~/.bashrc\n</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export LIBVIRT_DEFAULT_URI=qemu:///system'</span> &gt;&gt; ~/.zshrc\n</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>é…ç½®å¹¶å¯åŠ¨libvirtæœåŠ¡</strong></p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> libvirtd</span><br><span class="line">sudo systemctl start libvirtd</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="3-ç¼–è¯‘å®‰è£…-virt-manager-5-1-0"><a href="#3-ç¼–è¯‘å®‰è£…-virt-manager-5-1-0" class="headerlink" title="3. ç¼–è¯‘å®‰è£… virt-manager 5.1.0"></a>3. ç¼–è¯‘å®‰è£… virt-manager 5.1.0</h3><p>virt-manageræ˜¯ä¸€ä¸ªç”¨äºç®¡ç†è™šæ‹Ÿæœºçš„å›¾å½¢åŒ–ç•Œé¢ã€‚</p>
<ul>
<li><p><strong>å®‰è£…virt-managerä¸“å±ä¾èµ–</strong></p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install -y gir1.2-gtk-3.0 gir1.2-gtksource-3.0 gir1.2-vte-2.91 \</span><br><span class="line">libosinfo-1.0-dev gettext pylint pytest</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ç¼–è¯‘ä¸å®‰è£…</strong></p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/virt-manager/virt-manager.git</span><br><span class="line"><span class="built_in">cd</span> virt-manager</span><br><span class="line">git checkout v5.1.0</span><br><span class="line">meson setup build</span><br><span class="line">meson install -C build</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="âš™ï¸-é…ç½®VirtioFSæ–‡ä»¶å…±äº«"><a href="#âš™ï¸-é…ç½®VirtioFSæ–‡ä»¶å…±äº«" class="headerlink" title="âš™ï¸ é…ç½®VirtioFSæ–‡ä»¶å…±äº«"></a>âš™ï¸ é…ç½®VirtioFSæ–‡ä»¶å…±äº«</h2><p>ç»„ä»¶å®‰è£…å®Œæ¯•ï¼Œæ¥ä¸‹æ¥é…ç½®VirtioFSå…±äº«ã€‚</p>
<ol>
<li><p><strong>è®¾ç½®ç”¨æˆ·æƒé™</strong><br> å°†å½“å‰ç”¨æˆ·åŠ å…¥ <code>libvirt</code> å’Œ <code>kvm</code> ç»„ï¼Œä»¥ä¾¿ç®¡ç†è™šæ‹Ÿæœºè€Œæ— é¡»rootæƒé™ï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -aG libvirt,kvm <span class="variable">$USER</span></span><br><span class="line">newgrp libvirt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å‡†å¤‡å…±äº«ç›®å½•</strong><br> åœ¨ä¸»æœºä¸Šåˆ›å»ºä¸€ä¸ªå‡†å¤‡å…±äº«ç»™è™šæ‹Ÿæœºçš„ç›®å½•ï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /mnt/virtiofs_share</span><br><span class="line">sudo chown -R <span class="variable">$USER</span>:<span class="variable">$USER</span> /mnt/virtiofs_share</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>é…ç½®è™šæ‹ŸæœºXML (å…³é”®æ­¥éª¤)</strong><br> ä½¿ç”¨ <code>virsh edit [ä½ çš„è™šæ‹Ÿæœºåç§°]</code> ç¼–è¾‘Windows 10è™šæ‹Ÿæœºçš„é…ç½®ã€‚</p>
<ul>
<li><p><strong>å…³é”®ç‚¹</strong>ï¼šåœ¨ <code>&lt;devices&gt;</code> éƒ¨åˆ†æ·»åŠ æ–‡ä»¶ç³»ç»Ÿè®¾å¤‡ï¼Œå¹¶<strong>å¿…é¡»é€šè¿‡ <code>&lt;binary path=&quot;...&quot;&gt;</code> æ˜¾å¼æŒ‡å®šCç‰ˆ <code>virtiofsd</code> çš„è·¯å¾„</strong>ã€‚è¿™æ˜¯è§£å†³libvirtå¯èƒ½æ‰¾ä¸åˆ°æ­£ç¡® <code>virtiofsd</code> çš„å…³é”®ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">domain</span> <span class="attr">type</span>=<span class="string">'kvm'</span>&gt;</span></span><br><span class="line">  ... </span><br><span class="line">  <span class="tag">&lt;<span class="name">devices</span>&gt;</span></span><br><span class="line">    ... </span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ VirtioFSæ–‡ä»¶ç³»ç»Ÿè®¾å¤‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filesystem</span> <span class="attr">type</span>=<span class="string">'mount'</span> <span class="attr">accessmode</span>=<span class="string">'passthrough'</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">driver</span> <span class="attr">type</span>=<span class="string">'virtiofs'</span>/&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- æ˜¾å¼æŒ‡å®šCç‰ˆvirtiofsdè·¯å¾„ --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">binary</span> <span class="attr">path</span>=<span class="string">'/usr/local/libexec/virtiofsd'</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">source</span> <span class="attr">dir</span>=<span class="string">'/mnt/virtiofs_share'</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">target</span> <span class="attr">dir</span>=<span class="string">'vm_share'</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filesystem</span>&gt;</span></span><br><span class="line">    ... </span><br><span class="line">  <span class="tag">&lt;/<span class="name">devices</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">domain</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><em>æ³¨æ„*</em>ï¼šæ ¹æ®å®è·µï¼Œåœ¨ <code>qemu.conf</code> ä¸­é…ç½® <code>virtiofsd_path</code> å¯èƒ½æ— æ•ˆï¼Œå› æ­¤ç›´æ¥åœ¨è™šæ‹ŸæœºXMLä¸­æŒ‡å®šé©±åŠ¨ä½ç½®æ˜¯æ›´å¯é çš„æ–¹æ³•ã€‚</p>
</li>
</ul>
</li>
<li><p><strong>Windows 10è™šæ‹Ÿæœºé©±åŠ¨å®‰è£…</strong><br> è¦è®©Windows 10è¯†åˆ«VirtioFSå…±äº«ï¼Œéœ€å®‰è£…é©±åŠ¨ã€‚</p>
<ul>
<li>ä» <a href="https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/stable-virtio/virtio-win.iso" target="_blank" rel="noopener">Fedoraä»“åº“</a> ä¸‹è½½æœ€æ–°çš„ <code>virtio-win.iso</code>ã€‚</li>
<li>åœ¨virt-managerä¸­ï¼Œå°† <code>virtio-win.iso</code> æŒ‚è½½åˆ°Windows 10è™šæ‹Ÿæœºçš„CD-ROMã€‚</li>
<li>åœ¨Windowsè™šæ‹Ÿæœºä¸­ï¼Œå®‰è£…ISOæ ¹ç›®å½•ä¸‹çš„ <code>virtio-win-gt-x64.msi</code>ï¼Œæˆ–é€šè¿‡è®¾å¤‡ç®¡ç†å™¨ä¸ºæœªçŸ¥è®¾å¤‡æ‰‹åŠ¨å®‰è£… <code>virtio-fs</code> é©±åŠ¨ã€‚</li>
<li>é©±åŠ¨å®‰è£…åï¼Œåœ¨Windowsæ–‡ä»¶èµ„æºç®¡ç†å™¨çš„åœ°å€æ è¾“å…¥ <code>\\virtiofs\vm_share</code> è®¿é—®å…±äº«ç›®å½•ï¼Œæˆ–é€šè¿‡â€æ˜ å°„ç½‘ç»œé©±åŠ¨å™¨â€ä½¿ç”¨æ­¤è·¯å¾„ã€‚</li>
</ul>
</li>
</ol>
<h2 id="ğŸ’¡-æ•…éšœæ’é™¤å°è´´å£«"><a href="#ğŸ’¡-æ•…éšœæ’é™¤å°è´´å£«" class="headerlink" title="ğŸ’¡ æ•…éšœæ’é™¤å°è´´å£«"></a>ğŸ’¡ æ•…éšœæ’é™¤å°è´´å£«</h2><ul>
<li><p><strong>æƒé™é—®é¢˜</strong>ï¼šç¡®ä¿ <code>/usr/local/libexec/virtiofsd</code> å¯¹ <code>libvirt-qemu</code> ç”¨æˆ·å¯æ‰§è¡Œï¼Œä¸”å…±äº«ç›®å½•æœ‰ç›¸åº”æƒé™ã€‚</p>
</li>
<li><p><strong>libvirtæœåŠ¡</strong>ï¼šä¿®æ”¹é…ç½®æˆ–XMLåï¼Œè®°å¾—é‡å¯ <code>sudo systemctl restart libvirtd</code>ã€‚</p>
</li>
<li><p><strong>é©±åŠ¨é—®é¢˜</strong>ï¼šç¡®ä¿Windowsè™šæ‹Ÿæœºæ­£ç¡®å®‰è£…äº† <code>virtio-fs</code> é©±åŠ¨ã€‚</p>
</li>
<li><p><strong>ä¾èµ–æ’æŸ¥ä¸è§£å†³</strong></p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ldd $(<span class="built_in">which</span> qemu-system-x86_64) | grep glib</span><br><span class="line">readelf -d ./build/qemu-system-x86_64 | grep RPATH</span><br><span class="line">sudo patchelf --<span class="built_in">set</span>-rpath <span class="string">"/opt/glib-2.87/lib/x86_64-linux-gnu:/opt/libgcrypt-1.10/lib"</span> /usr/<span class="built_in">local</span>/bin/qemu-system-x86_64</span><br><span class="line">./configure LDFLAGS=<span class="string">"-Wl,-rpath,/opt/glib-2.87/lib/x86_64-linux-gnu:/opt/libgcrypt-1.10/lib"</span> --target-list=x86_64-softmmu \\n    --<span class="built_in">enable</span>-kvm --<span class="built_in">enable</span>-spice --<span class="built_in">enable</span>-vnc --<span class="built_in">enable</span>-guest-agent \\n    --<span class="built_in">enable</span>-virtfs --<span class="built_in">enable</span>-libusb --<span class="built_in">enable</span>-usb-redir \\n    --<span class="built_in">enable</span>-sdl --<span class="built_in">enable</span>-seccomp --<span class="built_in">enable</span>-numa --<span class="built_in">enable</span>-virglrenderer --<span class="built_in">enable</span>-opengl</span><br></pre></td></tr></table></figure></li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/os/" rel="tag"># os</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/mac/" rel="prev" title="mac">
      <i class="fa fa-chevron-left"></i> mac
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸ¯-UOSä¸‹çš„KVMç¼–è¯‘å®‰è£…"><span class="nav-number">1.</span> <span class="nav-text">ğŸ¯ UOSä¸‹çš„KVMç¼–è¯‘å®‰è£…</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸ“¦-å‰æœŸå‡†å¤‡ï¼šç¯å¢ƒä¸ä¾èµ–"><span class="nav-number">2.</span> <span class="nav-text">ğŸ“¦ å‰æœŸå‡†å¤‡ï¼šç¯å¢ƒä¸ä¾èµ–</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸ”§-ç»„ä»¶ç¼–è¯‘ä¸å®‰è£…"><span class="nav-number">3.</span> <span class="nav-text">ğŸ”§ ç»„ä»¶ç¼–è¯‘ä¸å®‰è£…</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-ç¼–è¯‘å®‰è£…-QEMU-7-2-21"><span class="nav-number">3.1.</span> <span class="nav-text">1. ç¼–è¯‘å®‰è£… QEMU 7.2.21</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-ç¼–è¯‘å®‰è£…-libvirt-8-0-0"><span class="nav-number">3.2.</span> <span class="nav-text">2. ç¼–è¯‘å®‰è£… libvirt 8.0.0</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-ç¼–è¯‘å®‰è£…-virt-manager-5-1-0"><span class="nav-number">3.3.</span> <span class="nav-text">3. ç¼–è¯‘å®‰è£… virt-manager 5.1.0</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#âš™ï¸-é…ç½®VirtioFSæ–‡ä»¶å…±äº«"><span class="nav-number">4.</span> <span class="nav-text">âš™ï¸ é…ç½®VirtioFSæ–‡ä»¶å…±äº«</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸ’¡-æ•…éšœæ’é™¤å°è´´å£«"><span class="nav-number">5.</span> <span class="nav-text">ğŸ’¡ æ•…éšœæ’é™¤å°è´´å£«</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ä¸‡æœ¯æµ·"
      src="/assets/avatar.jpg">
  <p class="site-author-name" itemprop="name">ä¸‡æœ¯æµ·</p>
  <div class="site-description" itemprop="description">ä¸ªäººçŸ¥è¯†åº“è®°è½½</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">23</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/haies" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;haies" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/imkv" title="Weibo â†’ https:&#x2F;&#x2F;weibo.com&#x2F;imkv" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/assets/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">æµ™ICPå¤‡15009661å· </a>
      <img src="/assets/beian.png" style="display: inline-block;"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010602002478" rel="noopener" target="_blank">æµ™å…¬ç½‘å®‰å¤‡33010602002478å· </a>
  </div>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ä¸‡æœ¯æµ·</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
